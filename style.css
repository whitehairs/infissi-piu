/* Mobile-first bianco e blu, responsive and print with canvas->image */
:root{
  --bg:#f7fbff; --card:#ffffff; --accent:#0b66ff; --muted:#526180; --border:#e2edff;
  --radius:12px; --pad:12px; --maxw:900px; --mono: "Roboto Mono", monospace;
}
*{box-sizing:border-box}
body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); margin:0; color:#092033; -webkit-font-smoothing:antialiased;}
.app{max-width:var(--maxw); margin:8px auto; padding:12px;}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;gap:12px}
.title h1{margin:0;font-size:18px;color:var(--accent)}
.title .muted{margin:0;color:var(--muted);font-size:12px}
.actions{display:flex;gap:6px}
.btn{background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-size:14px}
.btn.outline{background:transparent;color:var(--accent);border:1px solid var(--accent)}
.btn.primary{box-shadow:0 6px 18px rgba(11,102,255,0.08)}
.container{display:grid;grid-template-columns:1fr;gap:10px}
.card{background:var(--card);padding:var(--pad);border-radius:var(--radius);box-shadow:0 6px 18px rgba(9,32,51,0.04);border:1px solid var(--border)}
.form-grid{display:grid;grid-template-columns:repeat(2,minmax(120px,1fr));gap:8px}
label{font-size:13px;color:var(--muted);display:block}
input[type=number], select{width:100%;padding:8px;border-radius:8px;border:1px solid #dbe9ff;background:#fbfdff;font-size:14px}
.form-actions{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}

/* canvas */
.canvas-wrap{width:100%;overflow:hidden}
canvas{width:100%;height:auto;border-radius:8px;border:1px solid #e6f0ff;background:#fff;display:block}

/* tables */
.summary table, .details table{width:100%;border-collapse:collapse;font-family:var(--mono);font-size:13px}
.summary th, .summary td, .details th, .details td{padding:8px;border-bottom:1px solid #eef6ff;text-align:left}
.summary th{background:linear-gradient(90deg, rgba(11,102,255,0.06), transparent);color:var(--muted);width:45%}
.details th{background:#f3f8ff;color:var(--muted)}

/* log */
.logpre{background:#071225;color:#9ff4c8;padding:10px;border-radius:8px;overflow:auto;height:100px;font-family:var(--mono);font-size:13px}

/* larger screens */
@media(min-width:720px){
  .form-grid{grid-template-columns:repeat(4,minmax(140px,1fr));}
  .container{grid-template-columns:1fr 420px; grid-auto-rows:min-content}
  .drawing{grid-column: 1 / 3}
  .logpre{height:120px}
}

/* extra large */
@media(min-width:1000px){
  .app{padding:20px}
}

/* print */
@media print{
  body{background:#fff;color:#000}
  .topbar .actions, .form-actions, #logCard, footer {display:none !important}
  .card{box-shadow:none;border:none}
  canvas{display:none} /* canvas replaced by image during print via script */
  a[href]:after{content:""} /* remove link urls */
  .details table td, .summary table td {font-size:12px}
}


/* ===== Mobile optimizations v2 ===== */
canvas {
  width: 100% !important;
  height: auto !important;
  max-width: 100% !important;
  display: block;
}

@media (max-width: 768px) {
  body {
    margin: 8px;
    padding: 0;
  }
  h1, h2, h3 {
    font-size: clamp(16px, 4vw, 22px);
  }
  button, input, select {
    font-size: clamp(13px, 2.5vw, 16px);
    padding: 10px;
  }
  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
  }
  th, td {
    padding: 6px;
    font-size: clamp(12px, 2vw, 14px);
  }
}

@media (max-width: 480px) {
  table {
    border-collapse: separate;
    border-spacing: 0 4px;
  }
}
